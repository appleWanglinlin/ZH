- [x] [表达式和运算符](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators)

- [x] Truthy（真值）

  在 [JavaScript](https://developer.mozilla.org/zh-CN/docs/Glossary/JavaScript) 中，**truthy**（真值）指的是在[布尔值](https://developer.mozilla.org/zh-CN/docs/Glossary/Boolean)上下文中，转换后的值为真的值。所有值都是真值，除非它们被定义为 [假值](https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy)（**即除 `false`、`0`、`""`、`null`、`undefined` 和 `NaN` 以外皆为真值**）。

- [x] 逻辑运算符

  | 运算符              | 语法             | 说明                                                         |
  | :------------------ | :--------------- | :----------------------------------------------------------- |
  | 逻辑与，AND（`&&`） | `expr1 && expr2` | 若 `expr1` 可转换为 `true`，则返回 `expr2`；否则，返回 `expr1`。 |
  | 逻辑或，OR（`||`）  | `expr1 || expr2` | 若 `expr1` 可转换为 `true`，则返回 `expr1`；否则，返回 `expr2`。 |
  | 逻辑非，NOT（`!`）  | `!expr`          | 若 `expr` 可转换为 `true`，则返回 `false`；否则，返回 `true`。 |

  如果一个值可以被转换为 `true`，那么这个值就是所谓的 [truthy](https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy)，如果可以被转换为 `false`，那么这个值就是所谓的 [falsy](https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy)。

  会被转换为 `false` 的表达式有：

  - `null`
  - `NaN`
  - `0`
  - 空字符串（`""` or `''` or ````）
  - `undefined`

  ```js
  !![] // true，[]转换为true，!![]还是true
  ```

- [x] 按位逻辑运算符

  - **按位与**

    从概念上讲，按位逻辑操作符按遵守下面规则：

    - 操作数被转换成**32位**整数，用**比特序列（0和1组成）**表示。超过32位的数字会被丢弃。
      例如, 以下具有32位以上的整数将转换为32位整数:

    - ```
      转换前: 11100110111110100000000000000110000000000001
      转换后:             10100000000000000110000000000001
      ```

    - 第一个操作数的每个比特位与第二个操作数的相应比特位匹配：第一位对应第一位，第二位对应第二位，以此类推。

    - 位运算符应用到每对比特位，结果是新的比特值。

    **对每对比特位执行与（AND）操作**。只有 a 和 b 都是 1 时，a AND b 才是 1。**与操作**的真值表如下：

    | a    | b    | a AND b |
    | ---- | ---- | ------- |
    | 0    | 0    | 0       |
    | 0    | 1    | 0       |
    | 1    | 0    | 0       |
    | 1    | 1    | 1       |

    ```js
         9 (base 10) = 00000000000000000000000000001001 (base 2) // 2^3(表示2的3次方) + 2^0 = 9
        14 (base 10) = 00000000000000000000000000001110 (base 2) // 2^3 + 2^2 + 2^1 = 14
                       --------------------------------
    14 & 9 (base 10) = 00000000000000000000000000001000 (base 2) = 8 (base 10)
    ```

    **将任一数值 x 与 0 执行按位与操作，其结果都为 0。将任一数值 x 与 -1 执行按位与操作，其结果都为 x**。

    ```js
    1 & 0 // 0
    //   0001
    //   0000
    // & 0000 //0
    
    1 & -1 // 1
    ```

  - **按位或**

    对每一对比特位执行**或（OR）操作**。如果 a 或 b 为 1，则 `a` OR `b` 结果为 1。**或操作**的真值表：

    | a    | b    | a OR b |
    | ---- | ---- | ------ |
    | 0    | 0    | 0      |
    | 0    | 1    | 1      |
    | 1    | 0    | 1      |
    | 1    | 1    | 1      |

    ```js
       9 (base 10) = 00000000000000000000000000001001 (base 2)
        14 (base 10) = 00000000000000000000000000001110 (base 2)
                       --------------------------------
    14 | 9 (base 10) = 00000000000000000000000000001111 (base 2) = 15 (base 10)
    ```

    **将任一数值 x 与 0 进行按位或操作，其结果都是 x。将任一数值 x 与 -1 进行按位或操作，其结果都为 -1。**

    ```js
    1 | 0 // 1
    //   0001
    //   0000
    // | 0001 // 1 
    ```

    补充一些例子：

    ```js
    1 | 0 ;                       // 1
    
    1.1 | 0 ;                     // 1
    
    'asfdasfda' | 0 ;             // 0
    
    0 | 0 ;                       // 0
    
    (-1) | 0 ;                    // -1
    
    (-1.5646) | 0 ;               // -1
    
    [] | 0 ;                      // 0
    
    ({}) | 0 ;                    // 0
    
    "123456" | 0 ;            // 123456
    
    1.23E2 | 0;               // 123
    
    1.23E12 | 0;              // 1639353344
    
    -1.23E2 | 0;              // -123
    
    -1.23E12 | 0;             // -1639353344
    ```

  - **按位异或**

    对每一对比特位执行**异或（XOR）操作**。**当 a 和 b 不相同时，`a` XOR `b` 的结果为 1**。

    ```js
      9 (base 10) = 00000000000000000000000000001001 (base 2)
     14 (base 10) = 00000000000000000000000000001110 (base 2)
                       --------------------------------
    14 ^ 9 (base 10) = 00000000000000000000000000000111 (base 2) = 7 (base 10)
    ```

    **将任一数值 x 与 0 进行异或操作，其结果为 x。将任一数值 x 与 -1 进行异或操作，其结果为 ~x。**

    ```js
    1 ^ 0
    //   0001
    //   0000
    // ^ 0001 // 1
    ```

  - 按位非

    对每一个比特位执行**非（NOT）操作**。NOT `a` 结果为 a 的反转（即反码）。

    ```js
     9 (base 10) = 00000000000000000000000000001001 (base 2)
                   --------------------------------
    ~9 (base 10) = 11111111111111111111111111110110 (base 2) = -10 (base 10)
    ```

    **对任一数值 x 进行按位非操作的结果为 -(x + 1)。例如，~5 结果为 -6。**

- [x] [运算符优先级](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)

  运算符的优先级决定了表达式中运算执行的先后顺序，**优先级高的运算符最先被执行**。

  - 关联性

    关联性决定了拥有**相同优先级**的运算符的执行顺序。考虑下面这个表达式：

    ```js
    a OP b OP c;
    ```

    **左关联（左到右）**相当于把左边的子表达式加上小括号`(a OP b) OP c`，**右关联（右到左）**相当于`a OP (b OP c)`。**赋值运算符是右关联**的，所以你可以这么写：

    ```js
    a = b = 5; 
    // 相当于a = (b = 5)
    ```

    结果 `a` 和 `b` 的值都会成为5。这是因为**赋值运算符的返回结果就是赋值运算符右边的那个值**，具体过程是：`b`被赋值为5，然后`a`也被赋值为 `b=5` 的返回值，也就是5。

  - 优先级表格

    | 优先级 | 运算符                                                       | 关联性        |
    | ------ | ------------------------------------------------------------ | ------------- |
    | 21     | 圆括号 (...)                                                 | n/a（不相关） |
    | 20     |                                                              |               |
    | 19     |                                                              |               |
    | 18     | 后置递增/减 ...++、...--                                     | n/a           |
    | 17     | 逻辑非 !...<br />按位非 ~...<br />一元加法 +...<br />一元减法 -...<br />前置递增 ++...<br />前置递减 --...<br />typeof<br />void<br />delete<br />await | **从右到左**  |
    | 16     | 幂 **                                                        | **从右到左**  |
    | 15     | *、/、%                                                      | 从左到右      |
    | 14     | +、-                                                         | 从左到右      |
    | 13     |                                                              |               |
    | 12     | <、<=、>、>=、in、instanceof                                 | 从左到右      |
    | 11     | ==、!=、===、!==                                             | 从左到右      |
    | 10     | 按位与 &                                                     | 从左到右      |
    | 9      | 按位异或 ^                                                   | 从左到右      |
    | 8      | 按位或 \|                                                    | 从左到右      |
    | 7      | 逻辑与 &&                                                    | 从左到右      |
    | 6      | 逻辑或 \|\|                                                  | 从左到右      |
    | 5      | 空值合并 ??                                                  | 从左到右      |
    | 4      | 条件（三元）运算符 ... ? ...  :  ...                         | **从右到左**  |
    | 3      | 赋值                                                         | **从右到左**  |
    | 2      | yield、yield* yield …、yield* …                              | **从右到左**  |
    | 1      | 展开运算符  ...xxx                                           | n/a           |
    | 0      | 逗号 ... , ...                                               | 从左到右      |

  - 示例

    ```js
    3 > 2 && 2 > 1
    // return true
    
    3 > 2 > 1
    // 返回 false，因为 3 > 2 是 true，并且 true > 1 is false
    // 加括号可以更清楚：(3 > 2) > 1
    ```

- [x] [JavaScript中的相等性判断](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)

  **相等操作符**对于不同类型的值，进行的比较如下图所示：

  |        | 被        |    比     |   较    |          的           |              值               |               B               |                               |
  | ------ | :-------- | :-------: | :-----: | :-------------------: | :---------------------------: | :---------------------------: | :---------------------------: |
  | **被** |           | Undefined |  Null   |        Number         |            String             |            Boolean            |            Object             |
  | **比** | Undefined |   true    | `true`  |       ``false``       |            `false`            |            `false`            |         `IsFalsy(B)`          |
  | **较** | Null      |  `true`   | `true`  |        `false`        |            `false`            |            `false`            |         `IsFalsy(B)`          |
  | **的** | Number    |  `false`  | `false` |       `A === B`       |      `A === ToNumber(B)`      |      `A=== ToNumber(B)`       |     `A== ToPrimitive(B)`      |
  | **值** | String    |  `false`  | `false` |  `ToNumber(A) === B`  |           `A === B`           | `ToNumber(A) === ToNumber(B)` |     `ToPrimitive(B) == A`     |
  | **A**  | Boolean   |  `false`  | `false` |  `ToNumber(A) === B`  | `ToNumber(A) === ToNumber(B)` |           `A === B`           | ToNumber(A) == ToPrimitive(B) |
  |        | Object    |   false   |  false  | `ToPrimitive(A) == B` |     `ToPrimitive(A) == B`     | ToPrimitive(A) == ToNumber(B) |            A === B            |

  ![image-20210527152724887](C:\Users\ZH1087\AppData\Roaming\Typora\typora-user-images\image-20210527152724887.png)

  **在上面的表格中，`ToNumber(A)` 尝试在比较前将参数 A 转换为数字，这与 +A（单目运算符+）的效果相同。`ToPrimitive(A)`通过尝试调用 A 的`A.toString()` 和 `A.valueOf()` 方法，将参数 A 转换为原始值（Primitive）。**

- [x] [比较运算符](https://developer.mozilla.org/zh-CN/docs/conflicting/Web/JavaScript/Reference/Operators_310dc67549939233c3d18a8fa2cdbb23#equality)

  JavaScript 有两种比较方式：严格比较运算符和转换类型比较运算符。对于严格比较运算符（===）来说，仅当两个操作数的类型相同且值相等为 true，而对于被广泛使用的**比较运算符**（==）来说，会在进行比较之前，**将两个操作数转换成相同的类型**。对于关系运算符（比如 <=）来说，会先将操作数转为**原始值**，使它们类型相同，再进行比较运算。

  字符串比较则是使用基于标准字典的 Unicode 值来进行比较的。

  比较的特点:

  - 对于两个拥有相同字符顺序，相同长度，并且每个字符的位置都匹配的字符串，应该使用严格比较运算符。
  -  对于两个数值相同的数字应该使用严格比较运算符，**NaN和任何值不相等，包括其自身，正数零等于负数零**。
  - 对于两个同为true或同为false的布尔操作数，应使用严格比较运算符。
  - 不要使用严格比较运算符或比较运算符来比较两个不相等的对象。
  - 当比较一个表达式和一个对象时，仅当两个操作数引用相同的对象（指针指向相同对象）。
  - 对于Null 和 Undefined 类型而言，应使用严格比较运算符比较其自身，使用比较运算符进行互相比较。

  相等运算符（==）：

  >比较操作符会**为两个不同类型的操作数转换类型**，然后进行严格比较。当两个操作数都是对象时，JavaScript会比较其内部引用，当且仅当他们的引用指向内存中的相同对象（区域）时才相等，即他们在**栈内存中的引用地址**相同。
  >
  >```js
  >[] == true // false,[]被转换为0，true被转换为1
  >//[]转换成字符串为''
  >//[]转换成boolean为true
  >//[]转换成数字为0
  >
  >// 疑问：[]为什么转换为0而不是true
  >// true转换为1，相等运算符在比较时，将两个操作数转换成相同的类型，所以将[]转为Number类型，即为0
  >// 新疑问：[]为什么会被转为0？
  >// 猜想：根据上图，[]为对象类型，true为boolean类型，所以ToPrimitive(A) == ToNumber(B)
  >// 即为 ToPrimitive([]) == ToNumber(true),注意此处是仍然相等判断
  >// [].toString()返回'',true转为number类型为1
  >// 即为 '' == 1 的判断，ToNumber('') === 1，注意此时是全等判断,将空字符串转为数字0，即[]转为0
  >[1] == true // true，猜想：[1].toString()返回'1','1' == 1,即为true
  >[1] === true // false，类型不一致
  >[2] == true // false
  >
  >null == undefined // true
  >null === undefined // false
  >```
  >
  >当比较运算涉及类型转换时 (i.e., non–strict comparison), JavaScript 会按以下规则对字符串，数字，布尔或对象类型的操作数进行操作:
  >
  >- **当比较数字和字符串时，字符串会转换成数字值**。 JavaScript 尝试将数字字面量转换为数字类型的值。 首先, 一个数学上的值会从数字字面量中衍生出来，然后这个值将被转为一个最接近的`Number`类型的值。
  >
  >- 如果其中一个操作数为布尔类型，那么**布尔操作数如果为true，那么会转换为1，如果为false，会转换为整数0**，即0。
  >
  >- 如果**一个对象与数字或字符串相比较**，JavaScript会尝试返回对象的默认值。操作符会尝试通过方法**valueOf**和**toString**将对象转换为其**原始值（一个字符串或数字类型的值）**。如果尝试转换失败，会产生一个运行时**错误**。
  >
  >  ```js
  >  {} == 1 // 报错Uncaught SyntaxError: Unexpected token '=='
  >  
  >  [] == 1 // false
  >  var o = {}
  >  o == 1 // false
  >  ```
  >
  >- 注意：**当且仅当与原始值比较时，对象会被转换为原始值**。当两个操作数均为对象时，它们作为对象进行比较，仅当它们引用相同对象时返回true。

- [x] 一元运算符

  >delete：用来删除对象的属性
  >
  >void：表示表达式放弃返回值
  >
  >typeof：判断给定对象的类型
  >
  >+：一元正号运算符用来将操作数转换为number类型
  >
  >>一元正号运算符位于其操作数前面，计算其操作数的数值，如果操作数不是一个数值，会尝试将其转换成一个数值。 尽管一元负号也能转换非数值类型，**但是一元正号是转换其他对象到数值的最快方法，也是最推荐的做法，因为它不会对数值执行任何多余操作**。它可以将字符串转换成整数和浮点数形式，**也可以转换非字符串值 `true`，`false` `和` `null`**。小数和十六进制格式字符串也可以转换成数值。负数形式字符串也可以转换成数值（对于十六进制不适用）。如果它不能解析一个值，则计算结果为 [NaN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN)。
  >
  >>```js
  >>+3 //3
  >>+'3' // 3
  >>+true // 1
  >>+false // 0
  >>+null // 0
  >>+undefined // NaN
  >>+{} // NaN
  >>+[] // 0
  >>+[1] // 1
  >>+[1,2] // NaN
  >>+'' // 0
  >>+' ' // 0
  >>```
  >
  >-：一元负号运算符位于操作数前面，并转换操作数的符号。
  >
  >```js
  >let a = 3
  >b = -a
  >// b=-3 a=3
  >```

- [x] 算数运算符

  >相加运算符 (`+`) 用于对两个操作数进行相加运算，如果操作数为字符串则该运算符将两个操作数连接成一个字符串。
  >
  >注: '+'两侧只要有一侧是字符串，另一侧的数字则会自动转换成字符串，因为其中存在**隐式转换**
  >
  >```js
  >1 + true // 2
  >1 + false // 1
  >1 + null // 1
  >1 + undefined // NaN
  >true + true // 2
  >false + false // 0
  >null + null // 0
  >1 + '2' + '2’ // 122, 对于加法来说，如果有一个操作数是字符串，则将另一个操作数也转换为字符串，然后将两者拼接
  >1 + +'2' + '2' // 32, 注意有一元正号运算符
  >NaN + 1 // NaN
  >NaN + '1' // 'NaN1'
  >1 + {} // "1[object Object]"
  >1 + {a: 1} // "1[object Object]"
  >1 + [] // "1"
  >1 + [1] // "11"
  >1 + [1,2] // "11,2"
  >'a' + true // "atrue"
  >'a' + false // "afalse"
  >```
  >
  >-：减法运算符使两个操作数相减，结果是它们的差值。
  >
  >```js
  >'2' - 1 // 1
  >'A' - 2 // NaN, 在减法中遇到字符串和加法相反，调用Number()函数将字符串转换为数字，不能转换则返回NaN
  >'A' - 'B' + '2' // NaN2, 注意'2'是个字符串
  >'A' - 'B' + 2 // NaN
  >```